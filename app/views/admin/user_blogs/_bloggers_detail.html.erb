<div class="page-content" style="min-height:1215px">
<div class="row">
  <div class="col-md-12">
    <h3 class="page-title">
     User Bloggers
    </h3>
    <ul class="page-breadcrumb breadcrumb">
      <li>
        <i class="fa fa-home"></i>
        <!--<a href="/">Bloggers Detail</a>-->
        <i class="fa fa-angle-right"></i>
      </li>
      <li class="pull-right">
        <div data-original-title="Change dashboard date range" data-placement="top" class="dashboard-date-range tooltips" id="dashboard-report-range">
          <i class="icon-calendar"></i>
          <span></span>
          <i class="fa fa-angle-down"></i>
        </div>
      </li>
    </ul>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <div class="portlet box grey-cascade">
      <div class="portlet-title">
        <div class="caption">
          <i class="fa fa-globe"></i> Pending Bloggers
        </div>
        <div class="tools">
          <a class="collapse" href="javascript:;">
          </a>
          <a class="config" data-toggle="modal" href="#portlet-config">
          </a>
          <a class="reload" href="javascript:;">
          </a>
          <a class="remove" href="javascript:;">
          </a>
        </div>
      </div>
      <div class="portlet-body">
        <div class="table-toolbar">
        </div>
        <div id="pending_1_wrapper" class="dataTables_wrapper no-footer">
          <table id="pending" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid" aria-describedby="sample_1_info">
            <thead>
            <tr role="row">
              <th style="width: 25px;">
                #
              </th>
              <th class="sorting_asc" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 70px;" aria-sort="ascending" aria-label="Username: activate to sort column ascending">
                Name
              </th>
              <th class="sorting_asc" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 70px;" aria-sort="ascending" aria-label="Username: activate to sort column ascending">
                Email
              </th>
              <th class="sorting_asc" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 70px;" aria-sort="ascending" aria-label="Username: activate to sort column ascending">
                Username
              </th>
              <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 248px;" aria-label="Email">
                Blog Url
              </th>
              <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 100px;" aria-label="Points">
                Action
              </th>
            </tr>
            </thead>
            <tbody>
            <% pending.each_with_index do |user, index| %>
                <tr class="">
                  <td>
                    <%= index+1 %>
                  </td>
                  <td>
                    <%= (user.first_name.present? ? user.first_name : '') + ' ' + (user.last_name.present? ? user.last_name : '') %>
                  </td>
                  <td>
                    <%= user.email %>
                  </td>
                  <td>
                    <%= user.user_name if user.user_name.present? %>
                  </td>
                  <td>
                    <%= user.user_feed.url if user.user_feed.url.present? %>
                  </td>
                  <td>
                    <button class="btn green" onclick="block_unblock(0,<%= user.user_feed.id %>,'<%= user.id %>')">Activate</button>
                    <button class="btn red" onclick="block_unblock(1,<%= user.user_feed.id %>,'<%= user.id %>')">Block</button>
                  </td>
                </tr>
            <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <!-- BEGIN EXAMPLE TABLE PORTLET-->
    <div class="portlet box grey-cascade">
      <div class="portlet-title">
        <div class="caption">
          <i class="fa fa-globe"></i> Active Bloggers
        </div>
        <div class="tools">
          <a class="collapse" href="javascript:;">
          </a>
          <a class="config" data-toggle="modal" href="#portlet-config">
          </a>
          <a class="reload" href="javascript:;">
          </a>
          <a class="remove" href="javascript:;">
          </a>
        </div>
      </div>
      <div class="portlet-body">
        <div class="table-toolbar">
        </div>
        <div id="active_1_wrapper" class="dataTables_wrapper no-footer">
          <!--<div class="table-scrollable">-->
          <table id="active" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid" aria-describedby="sample_1_info">
            <thead>
            <tr role="row">
              <th style="width: 80px;">
                #
              </th>
              <th class="sorting_asc" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 70px;" aria-sort="ascending" aria-label="Username: activate to sort column ascending">
                Name
              </th>
              <th class="sorting_asc" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 70px;" aria-sort="ascending" aria-label="Username: activate to sort column ascending">
                Email
              </th>
              <th class="sorting_asc" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 70px;" aria-sort="ascending" aria-label="Username: activate to sort column ascending">
                Username
              </th>
              <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 248px;" aria-label="Email">
                Blog Name
              </th>
              <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 100px;" aria-label="Points">
                Action
              </th>
            </tr>
            </thead>
            <tbody>
            <% active.each_with_index do |user, index| %>
                <tr class="">
                  <td>
                    <%= index+1 %>
                  </td>
                  <td>
                    <%= (user.first_name.present? ? user.first_name : '') + ' ' + (user.last_name.present? ? user.last_name : '') %>
                  </td>
                  <td>
                    <%= user.email %>
                  </td>
                  <td>
                    <%= user.user_name if user.user_name.present? %>
                  </td>
                  <td>
                    <%= user.user_feed.feed_title if user.user_feed.feed_title.present? %>
                  </td>
                  <td>
                    <button class="btn red" onclick="block_unblock(1,<%= user.user_feed.id %>,'<%= user.id %>')">Block</button>
                  </td>
                </tr>
            <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <!-- BEGIN EXAMPLE TABLE PORTLET-->
    <div class="portlet box grey-cascade">
      <div class="portlet-title">
        <div class="caption">
          <i class="fa fa-globe"></i> Blocked Bloggers
        </div>
        <div class="tools">
          <a class="collapse" href="javascript:;">
          </a>
          <a class="config" data-toggle="modal" href="#portlet-config">
          </a>
          <a class="reload" href="javascript:;">
          </a>
          <a class="remove" href="javascript:;">
          </a>
        </div>
      </div>
      <div class="portlet-body">
        <div class="table-toolbar">
        </div>
        <div id="block_1_wrapper" class="dataTables_wrapper no-footer">
          <table id="blocked" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid" aria-describedby="sample_1_info">
            <thead>
            <tr role="row">
              <th style="width: 80px;">
                #
              </th>
              <th class="sorting_asc" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 70px;" aria-sort="ascending" aria-label="Username: activate to sort column ascending">
                Name
              </th>
              <th class="sorting_asc" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 70px;" aria-sort="ascending" aria-label="Username: activate to sort column ascending">
                Email
              </th>
              <th class="sorting_asc" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 70px;" aria-sort="ascending" aria-label="Username: activate to sort column ascending">
                Username
              </th>
              <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 248px;" aria-label="Email">
                Blog Name
              </th>
              <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 100px;" aria-label="Points">
                Action
              </th>
            </tr>
            </thead>
            <tbody>
            <% inactive.each_with_index do |user, index| %>
                <tr class="">
                  <td>
                    <%= index+1 %>
                  </td>
                  <td>
                    <%= (user.first_name.present? ? user.first_name : '') + ' ' + (user.last_name.present? ? user.last_name : '') %>
                  </td>
                  <td>
                    <%= user.email %>
                  </td>
                  <td>
                    <%= user.user_name if user.user_name.present? %>
                  </td>
                  <td>
                    <%= user.user_feed.feed_title if user.user_feed.feed_title.present? %>
                  </td>
                  <td>
                    <button class="btn red" onclick="block_unblock(0,<%= user.user_feed.id %>,'<%= user.id %>')">Unblock</button>
                  </td>
                </tr>
            <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
</div>



<script>
    var table = $('#pending');
    table.dataTable({
        "columns": [
            {
                "orderable": true
            },
            {
                "orderable": true
            },
            {
                "orderable": false
            },
            {
                "orderable": false
            }
        ],
        "lengthMenu": [
            [5, 10, 15, 20, -1],
            [5, 10, 15, 20, "All"] // change per page values here
        ],
// set the initial value
        "pageLength": 10,
        "pagingType": "bootstrap_full_number",
        "language": {
            "lengthMenu": "_MENU_ records",
            "paginate": {
                "previous": "Prev",
                "next": "Next",
                "last": "Last",
                "first": "First"
            }
        },
        "columnDefs": [
            {  // set default column settings
                'orderable': true,
                'targets': [1]
            },
            {
                "searchable": true,
                "targets": [1]
            }
        ],
        "order": [
            [1, "asc"]
        ] // set first column as a default sort by asc
    });

    var table = $('#active');
    table.dataTable({
        "columns": [
            {
                "orderable": true
            },
            {
                "orderable": true
            },
            {
                "orderable": false
            },
            {
                "orderable": false
            }
        ],
        "lengthMenu": [
            [5, 10, 15, 20, -1],
            [5, 10, 15, 20, "All"] // change per page values here
        ],
        // set the initial value
        "pageLength": 10,
        "pagingType": "bootstrap_full_number",
        "language": {
            "lengthMenu": "_MENU_ records",
            "paginate": {
                "previous": "Prev",
                "next": "Next",
                "last": "Last",
                "first": "First"
            }
        },
        "columnDefs": [
            {  // set default column settings
                'orderable': true,
                'targets': [1]
            },
            {
                "searchable": true,
                "targets": [1]
            }
        ],
        "order": [
            [1, "asc"]
        ] // set first column as a default sort by asc
    });

    var table = $('#blocked');
    table.dataTable({
        "columns": [
            {
                "orderable": true
            },
            {
                "orderable": true
            },
            {
                "orderable": false
            },
            {
                "orderable": false
            }
        ],
        "lengthMenu": [
            [5, 10, 15, 20, -1],
            [5, 10, 15, 20, "All"] // change per page values here
        ],
        // set the initial value
        "pageLength": 10,
        "pagingType": "bootstrap_full_number",
        "language": {
            "lengthMenu": "_MENU_ records",
            "paginate": {
                "previous": "Prev",
                "next": "Next",
                "last": "Last",
                "first": "First"
            }
        },
        "columnDefs": [
            {  // set default column settings
                'orderable': true,
                'targets': [1]
            },
            {
                "searchable": true,
                "targets": [1]
            }
        ],
        "order": [
            [1, "asc"]
        ] // set first column as a default sort by asc
    });


    function block_unblock(status, feed_id, user_id) {
        $(".background_shadow").show();
        $.ajax({
            url: '/admin/user_blogs/block_unblock_feed?feed_id=' + feed_id + '&user_id=' + user_id + '&status=' + status + '&other=0',
            processData: false,
            success: function (data) {
                $(".background_shadow").hide();
                $("#panel_body").html(data);
            }
        });
    }
</script>